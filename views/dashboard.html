<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rackoon Streaming</title>
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="stylesheet" href="../css/modal.css">
  <link rel="stylesheet" href="../css/video-player.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Barre de navigation -->
  <nav class="navbar">
    <div class="logo">RACKOON</div>
    <div class="user-controls">
      <div class="user-profile">
        <span id="username"></span>
      </div>
      <button id="logout-btn" class="btn-logout">D√©connexion</button>
    </div>
  </nav>

  <!-- Contenu principal -->
  <main class="main-content">
    <!-- Zone de chargement -->
    <div class="loading-container" id="loading-container">
      <div class="status-message" id="status-message">Pr√™t √† rechercher des vid√©os</div>
      <div class="progress-bar-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
    </div>

    <!-- Section des m√©dias -->
    <div class="section-header">
      <h2 class="section-title">M√©dias Tri√©s</h2>
      <div class="filters-search-container">
        <div class="search-filter">
          <span class="search-icon">
            <i class="fas fa-search"></i>
          </span>
          <input type="text" id="filter-search" placeholder="Rechercher un titre...">
        </div>
        <button class="filter-button" id="filter-btn">
          <span class="filter-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
            </svg>
          </span>
          Filtres
        </button>
      </div>
    </div>

    <div class="media-grid" id="media-grid">
      <!-- Les m√©dias seront ajout√©s ici dynamiquement -->
      <div class="empty-state">
        <span class="icon">üìº</span>
        <p>Aucune vid√©o trouv√©e. Utilisez le bouton + pour lancer une recherche.</p>
      </div>
    </div>
  </main>

  <!-- Bouton d'action flottant -->
  <div class="floating-action" id="add-btn">
    <span class="plus-icon">+</span>
  </div>

  <!-- Menu flottant pour le scan -->
  <div class="floating-menu" id="scan-menu">
    <h3>Ajouter des m√©dias</h3>
    <div class="scan-actions">
      <button class="scan-btn" id="scan-folder-btn">
        <span class="icon"><i class="fas fa-folder-open"></i></span>
        Rechercher un dossier
      </button>
      <button class="scan-btn" id="scan-file-btn">
        <span class="icon"><i class="fas fa-file-video"></i></span>
        Rechercher un fichier
      </button>
    </div>
  </div>

  <!-- Template pour les cartes de films -->
  <template id="media-card-template">
    <div class="media-card" data-id="" data-title="">
      <div class="media-thumbnail-container">
        <img src="" alt="" class="media-thumbnail">
      </div>
      <div class="media-info">
        <div class="media-title-container">
          <h3 class="media-title"></h3>
          <div class="watch-top">
            <button class="btn-watch-toggle">√† voir</button>
          </div>
        </div>
        <div class="media-extended-info">
          <div class="media-duration">
            Dur√©e: <span class="duration-value"></span>
          </div>
          <div class="rating-container">
            <div class="stars-container">
              <span class="star" data-value="1"><i class="fas fa-star"></i></span>
              <span class="star" data-value="2"><i class="fas fa-star"></i></span>
              <span class="star" data-value="3"><i class="fas fa-star"></i></span>
              <span class="star" data-value="4"><i class="fas fa-star"></i></span>
              <span class="star" data-value="5"><i class="fas fa-star"></i></span>
            </div>
            <div class="watch-hover">
              <button class="btn-watch-toggle">√† voir</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </template>

  <!-- Modal de pr√©sentation du film -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="movie-modal" id="movie-modal">
      <button class="modal-close" id="modal-close">√ó</button>
      
      <!-- Mode visualisation -->
      <div class="view-mode" id="view-mode">
        <div class="modal-poster">
          <img src="../public/img/default-thumbnail.svg" alt="Poster du film" id="modal-poster">
        </div>
        
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="modal-title">Le Comte de Monte Cristo</h2>
            <span class="movie-year" id="movie-year">(2024)</span>
            <button class="edit-button" id="edit-button">
              <i class="fas fa-pencil-alt"></i>
            </button>
          </div>
          
          <div class="movie-meta">
            <div class="release-date" id="release-date"></div>
            <div class="duration" id="duration">2h 35m</div>
          </div>
          
          <div class="genres-container" id="genres-container">
            <span class="genre-tag"></span>
            <span class="genre-tag"></span>
            <span class="genre-tag"></span>
          </div>
          
          <div class="rating-section">
            <div class="modal-stars">
              <span class="modal-star" data-value="1"><i class="fas fa-star"></i></span>
              <span class="modal-star" data-value="2"><i class="fas fa-star"></i></span>
              <span class="modal-star" data-value="3"><i class="fas fa-star"></i></span>
              <span class="modal-star" data-value="4"><i class="fas fa-star"></i></span>
              <span class="modal-star" data-value="5"><i class="fas fa-star"></i></span>
            </div>
          </div>
          
          <div class="synopsis">
            <h3 class="synopsis-title">Synopsis</h3>
            <div class="synopsis-content" id="synopsis-content"></div>
          </div>
          
          <div class="modal-actions">
            <button class="btn-watch-toggle-modal" id="btn-watch-toggle-modal">√Ä voir</button>
            <button class="btn-watch-film" id="btn-watch-film">Regarder le film</button>
          </div>
        </div>
      </div>
      
      <!-- Mode √©dition (initialement cach√©) -->
      <div class="edit-mode" id="edit-mode" style="display: none;">
        <div class="modal-content">
          <!-- Titre du mode √©dition -->
          <div class="edit-header">
            <h2>Sortir du mode √©dition</h2>
          </div>
          
          <!-- Bouton de recherche sur TMDB -->
          <button class="tmdb-search-btn" id="tmdb-search-btn">
            <i class="fas fa-search"></i> Rechercher sur The Movie Database
          </button>
          
          <!-- Titre -->
          <div class="edit-section">
            <div class="edit-section-title">Nom</div>
            <div class="edit-field">
              <input type="text" id="edit-title-input" placeholder="Titre du film">
            </div>
          </div>
          
          <!-- Ann√©e et date de sortie -->
          <div class="edit-section">
            <div class="edit-section-title">Date de sortie</div>
            <div class="edit-field">
              <input type="date" id="edit-release-date" placeholder="Date de sortie">
            </div>
          </div>
          
          <!-- Genres -->
          <div class="edit-section">
            <div class="edit-section-title">Genres</div>
            <!-- Genres pr√©d√©finis -->
            <div class="edit-field genre-selection">
              <select class="genre-dropdown" id="genre-dropdown">
                <option value="">Choisir un genre</option>
                <option value="Action">Action</option>
                <option value="Aventure">Aventure</option>
                <option value="Animation">Animation</option>
                <option value="Com√©die">Com√©die</option>
                <option value="Crime">Crime</option>
                <option value="Documentaire">Documentaire</option>
                <option value="Drame">Drame</option>
                <option value="Famille">Famille</option>
                <option value="Fantastique">Fantastique</option>
                <option value="Histoire">Histoire</option>
                <option value="Horreur">Horreur</option>
                <option value="Musique">Musique</option>
                <option value="Myst√®re">Myst√®re</option>
                <option value="Romance">Romance</option>
                <option value="Science-Fiction">Science-Fiction</option>
                <option value="Thriller">Thriller</option>
                <option value="Guerre">Guerre</option>
                <option value="Western">Western</option>
              </select>
              <button class="add-genre-btn" id="add-predefined-genre">Ajouter</button>
            </div>
            
            <!-- Affichage des genres s√©lectionn√©s -->
            <div class="genres-edit" id="edit-genres-container">
              <!-- Les genres seront ajout√©s ici dynamiquement -->
            </div>
            
            <!-- Ajout de genres personnalis√©s -->
            <div class="add-genre-container">
              <input type="text" class="add-genre-input" id="custom-genre-input" placeholder="Genre personnalis√©">
              <button class="add-genre-btn" id="add-custom-genre">Ajouter</button>
            </div>
          </div>
          
          <!-- Image -->
          <div class="edit-section">
            <div class="edit-section-title">Image</div>
            <div class="image-upload-container">
              <img src="../public/img/default-thumbnail.svg" class="image-upload-preview" id="image-preview">
              <div class="image-upload-controls">
                <button class="image-upload-btn" id="upload-image-btn">Changer l'image</button>
              </div>
            </div>
          </div>
          
          <!-- Synopsis -->
          <div class="edit-section">
            <div class="edit-section-title">Synopsis</div>
            <div class="edit-field">
              <textarea id="edit-synopsis-input" placeholder="Synopsis du film"></textarea>
            </div>
          </div>
          
          <!-- Boutons d'action -->
          <button class="save-changes-btn" id="save-changes-btn">Enregistrer les modifications</button>
          <button class="exit-edit-mode" id="exit-edit-mode">Sortir du mode √©dition</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="../js/dashboard.js"></script>
  <script src="../js/movie-modal.js"></script>
  <script src="../js/video-player.js"></script>
</body>
</html>